import{f as m,h as p,j as e,r as h,S as d,u as g}from"./index-fb896bb1.js";import{a as x}from"./useGetPosts-289ad093.js";import{u as j,L as v}from"./index.esm-cd4cabac.js";import"./posts-91e32ef6.js";const _="_catalogBody_wc8v4_1",P="_catalogItem_wc8v4_11",f="_postContainer_wc8v4_28",y="_postInfo_wc8v4_43",S="_postLocation_wc8v4_50",N="_price_wc8v4_60",C="_pagination_wc8v4_66",b="_activePage_wc8v4_87",L="_results_wc8v4_92",n={catalogBody:_,catalogItem:P,postContainer:f,postInfo:y,postLocation:S,price:N,pagination:C,activePage:b,results:L},w="_filterPanel_k929m_1",I="_form_k929m_8",F="_priceWrapper_k929m_70",l={filterPanel:w,form:I,priceWrapper:F};function W(){const s=m(),{register:t,handleSubmit:r}=j(),[o,a]=p();function i(c){c.listingPurpose==="remove"&&(c.listingPurpose=""),c.location==="remove"&&(c.location=""),c.typeProperty==="remove"&&(c.typeProperty=""),a(c),s.invalidateQueries({queryKey:["posts"]})}return e.jsxs("div",{className:l.filterPanel,children:["Filter properties by:",e.jsxs("form",{className:l.form,onSubmit:r(c=>i(c)),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"typeProperty",children:"Type of property"}),e.jsxs("select",{...t("typeProperty"),children:[e.jsx("option",{value:"remove",children:"All"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"house",children:"House"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsxs("div",{className:l.priceWrapper,children:[e.jsx("input",{type:"number",placeholder:"> Greter than",...t("pricegte")}),e.jsx("input",{type:"number",placeholder:"< Less than",...t("pricelte")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",children:"Location"}),e.jsx(v,{register:t,bgColor:"gray",includeAll:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"listingPurpose",children:"Listing Purpose"}),e.jsxs("select",{...t("listingPurpose"),children:[e.jsx("option",{value:"remove",children:"All"}),e.jsx("option",{value:"renting",children:"Renting"}),e.jsx("option",{value:"sale",children:"Sale"})]})]}),e.jsx("button",{children:"Search changes"})]})]})}const k="_searchWrapper_1uhmm_1",u={searchWrapper:k};function B(){const[s,t]=h.useState(""),[r,o]=p();function a(i){t(i.target.value),o({search:i.target.value})}return e.jsx("div",{className:u.searchPanel,children:e.jsxs("div",{className:u.searchWrapper,children:[e.jsx("img",{src:"/search.svg",alt:"search"}),e.jsx("input",{type:"search",name:"gsearch",placeholder:"Search by title",onChange:i=>a(i),value:s})]})})}function q(s){const[t,r]=p(),o=m();h.useEffect(()=>{const a=new URLSearchParams(t);a.set("page",s.toString()),r(a),o.invalidateQueries({queryKey:["posts"]})},[s,t,o,r])}function U(){const{data:s,isLoading:t}=x(),[r,o]=h.useState(1);return q(r),e.jsx("div",{className:n.catalogBody,children:e.jsxs("div",{className:"container",children:[e.jsx(B,{}),e.jsx(W,{}),e.jsxs("div",{className:n.postContainer,children:[t&&e.jsx(d,{}),!t&&e.jsxs("span",{className:n.results,children:["Results: ",s.total]}),!t&&s.posts.map(a=>e.jsx(A,{item:a},a._id)),!t&&s.posts.length>0&&e.jsxs("div",{className:n.pagination,children:[r-1>0&&e.jsx("button",{onClick:()=>o(a=>a-1),children:r-1}),e.jsx("button",{className:n.activePage,children:r}),s.left>0&&e.jsx("button",{onClick:()=>o(a=>a+1),children:r+1})]})]})]})})}function A({item:s}){const t=g();return e.jsxs("div",{className:n.catalogItem,onClick:()=>t(`/app/post/${s._id}`),children:[e.jsx("img",{src:`/${s.imgs[0]}`}),e.jsxs("div",{className:n.postInfo,children:[e.jsx("span",{className:n.title,children:s.title}),e.jsxs("span",{className:n.price,children:[s.price.toLocaleString("en-US")," Birr"]}),e.jsxs("div",{className:n.postLocation,children:[e.jsx("img",{src:"/pin.svg"}),e.jsx("span",{children:s.location[0].toUpperCase()+s.location.slice(1)})]})]})]})}export{U as default};
